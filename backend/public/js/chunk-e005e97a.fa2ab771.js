(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e005e97a"],{"0a49":function(t,e,s){var n=s("9b43"),a=s("626a"),i=s("4bf8"),r=s("9def"),c=s("cd1c");t.exports=function(t,e){var s=1==t,o=2==t,l=3==t,u=4==t,h=6==t,d=5==t||h,f=e||c;return function(e,c,g){for(var p,m,v=i(e),C=a(v),_=n(c,g,3),b=r(C.length),k=0,w=s?f(e,b):o?f(e,0):void 0;b>k;k++)if((d||k in C)&&(p=C[k],m=_(p,k,v),t))if(s)w[k]=m;else if(m)switch(t){case 3:return!0;case 5:return p;case 6:return k;case 2:w.push(p)}else if(u)return!1;return h?-1:l||u?u:w}}},1169:function(t,e,s){var n=s("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"20d6":function(t,e,s){"use strict";var n=s("5ca1"),a=s("0a49")(6),i="findIndex",r=!0;i in[]&&Array(1)[i](function(){r=!1}),n(n.P+n.F*r,"Array",{findIndex:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")(i)},"54e8":function(t,e,s){},"599e":function(t,e,s){},9478:function(t,e,s){"use strict";var n=s("54e8"),a=s.n(n);a.a},"993c":function(t,e,s){"use strict";var n=s("b696"),a=s.n(n);a.a},b696:function(t,e,s){},c862:function(t,e,s){"use strict";var n=s("599e"),a=s.n(n);a.a},cd1c:function(t,e,s){var n=s("e853");t.exports=function(t,e){return new(n(t))(e)}},d9c0:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"cheer-details-container"},[s("loading-modal"),s("section",{staticClass:"title-attendance-container"},[s("div",{staticClass:"name-date dark",style:t.backgroundImg},[s("div",{staticClass:"date"},[s("span",[t._v(t._s(t.date))])]),s("span",{staticClass:"location-name"},[t._v(t._s(t.cheer.locationName))]),s("br"),s("br"),t.cheer.attendees?s("span",{staticClass:"attens-num"},[t._v(t._s(t.cheer.attendees.length)+" mates comming!")]):t._e()]),s("div",{staticClass:"attending-share"},[s("div",{staticClass:"spot-attendance"},[t.userIsGoing?s("div",{staticClass:"is-going"},[s("h4",{staticClass:"txt"},[t._v("\n                        You are attending to this cheer!\n                        "),t.cheer.attendees?s("span",{staticClass:"spots-left"},[t._v("Spots left: "+t._s(t.spotsLeft))]):t._e()]),s("el-button",{staticClass:"btn",attrs:{size:"small",type:"warning",icon:"el-icon-close",plain:""},on:{click:function(e){t.userAttending(!1)}}},[t._v("Cancel")])],1):s("div",{staticClass:"is-going"},[s("h4",{staticClass:"txt"},[t._v("\n                        Are You Going?\n                        "),t.cheer.attendees?s("span",{staticClass:"spots-left"},[t._v(t._s(t.spotsLeft)+" Spots left")]):t._e()]),s("el-button",{staticClass:"btn",attrs:{size:"small",type:"warning",icon:"el-icon-check"},on:{click:function(e){t.userAttending(!0)}}}),s("el-button",{staticClass:"btn",attrs:{size:"small",type:"warning",icon:"el-icon-close",plain:""},on:{click:function(e){t.userAttending(!1)}}})],1),s("div",{staticClass:"share"},[s("span"),s("social-sharing",{inlineTemplate:{render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("network",{attrs:{network:"facebook"}},[s("i",{staticClass:"fab fa-facebook-square"})]),s("network",{attrs:{network:"linkedin"}},[s("i",{staticClass:"fab fa-linkedin"})]),s("network",{attrs:{network:"twitter"}},[s("i",{staticClass:"fab fa-twitter-square"})]),s("network",{attrs:{network:"whatsapp"}},[s("i",{staticClass:"fab fa-whatsapp-square"})])],1)},staticRenderFns:[]}})],1),s("div",{staticClass:"categories"},[s("h1",[t._v("We are going to talk about ")]),t._l(t.cheer.category,function(e){return t.cheer.category?s("h2",{key:e},[t._v(t._s(e)),s("br")]):s("h1",[t._v("Everything")])})],2)])])]),s("section",{staticClass:"main-info-container"},[s("div",{staticClass:"description-attendees"},[s("section",{staticClass:"cheer-attendees"},[t.cheer.attendees&&t.cheer.attendees.length?s("h3",[t._v(" Attendees:")]):s("h3",[t._v("Be the first one to join!")]),s("div",{staticClass:"attendees"})])]),s("chat-room",{attrs:{msgs:t.msgs}}),s("button",{staticClass:"chat-toggle",on:{click:t.toggleChat}})],1),s("section",{staticClass:"cheer-location flex column"},[s("div",{staticClass:"address"},[s("div",{staticClass:"icon"},[s("i",{staticClass:"fas fa-map-marker-alt"}),t._v(t._s(t.cheer.address))])]),s("div",{staticClass:"map"},[s("img",{attrs:{src:t.mapPic,alt:"map"}})])])],1)},a=[],i=(s("20d6"),s("cadf"),s("551c"),s("097d"),s("2670")),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"user-card-container"},[s("el-row",[s("img",{staticClass:"image",attrs:{src:t.user.img?t.user.img:"https://via.placeholder.com/100x100"}})])],1)},c=[],o={props:{user:{type:Object,default:{}}},data:function(){return{currentDate:new Date}}},l=o,u=(s("9478"),s("2877")),h=Object(u["a"])(l,r,c,!1,null,"22d5f8cf",null);h.options.__file="user-card.vue";var d=h.exports,f=(s("2d82"),s("2929")),g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"chat"},[s("section",{ref:"chatList",staticClass:"chat-msg-list"},[s("h1",[t._v("Let's start talking")]),s("ul",{staticClass:"clean-list"},[t._l(t.msgs,function(e){return s("li",{key:e.at,staticClass:"msg"},[t._v(t._s(e.from)+": "+t._s(e.txt))])}),s("span",{ref:"endOfChat",attrs:{id:"end-of-chat"}})],2)]),s("form",{ref:"chat",on:{submit:function(e){return e.preventDefault(),t.sendMsg(e)}}},[s("input",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:"#end-of-chat",expression:"'#end-of-chat'"}],ref:"newMsgInput",attrs:{type:"text"}}),s("button",[t._v("send")])])])},p=[],m={props:{msgs:{type:Array,default:function(){return[]}}},mounted:function(){window.refs=this.$refs},methods:{sendMsg:function(){var t=this.$refs.newMsgInput,e=t.value;if(e.trim()){var s=this.$route.params.cheerId,n=this.$store.getters.getUser,a=n?n.nickname:"Guest",i=n?n._id:"",r={userId:i,txt:e,at:Date.now(),from:a};this.$socket.emit("newChatMsg",{msg:r,cheerId:s}),t.value=""}},scrollToEnd:function(){var t=this.$refs.chatList;t.scrollTop=t.scrollHeight-t.clientHeight}},watch:{"msgs.length":function(t,e){var s=this;console.log({length:t,prevLength:e}),0===e&&this.$nextTick().then(function(){return s.scrollToEnd()})}}},v=m,C=(s("c862"),Object(u["a"])(v,g,p,!1,null,"0ae8658a",null));C.options.__file="chat-room.vue";var _=C.exports,b=s("c1df"),k={data:function(){return{cheer:{position:{coordinates:{}}}}},created:function(){this.loadCheer(),this.$socket.emit("joinRoom",this.$route.params.cheerId),this.$store.dispatch({type:"setLoading",isLoading:!0})},methods:{loadCheer:function(){var t=this,e=this.$route.params.cheerId;i["a"].getById(e).then(function(e){return console.log("this cheer:",e),t.$store.dispatch({type:"setLoading",isLoading:!1}),t.cheer=e})},userAttending:function(t){var e,s=this,n=this.$route.params.cheerId,a=this.$store.getters.getUser;if(a)if(e=a._id,t)this.$socket.emit("userAttending",{userId:e,cheerId:n});else{var r=this.cheer.attendees.findIndex(function(t){return t._id===e});r>=0&&i["a"].removeAttendance(n).then(function(){return s.loadCheer()})}else this.$router.push("/login")},toggleChat:function(){this.$el.querySelector(".chat").classList.toggle("open")}},computed:{date:function(){return b(this.cheer.date).format("dddd, LL")},relativeDate:function(){return b(this.cheer.date).fromNow()},spotsLeft:function(){return this.cheer.spots-this.cheer.attendees.length},time:function(){return b(this.cheer.date).format("hh:mm A")},mapPic:function(){return"https://maps.googleapis.com/maps/api/staticmap?center=".concat(this.cheer.position.coordinates.lat,",").concat(this.cheer.position.coordinates.lng,"&markers=color:red%7Clabel:C%7C").concat(this.cheer.position.coordinates.lat,",").concat(this.cheer.position.coordinates.lng,"&zoom=16&size=600x400&key=AIzaSyDSpb5jrUSIDb124D7Qpjd4XJQ6d8oVPW0")},msgs:function(){var t=this.cheer.msgs;return t},userIsGoing:function(){var t,e=this.$store.getters.getUser;if(!e||!this.cheer.attendees)return!1;t=e._id;var s=this.cheer.attendees.findIndex(function(e){return e._id===t});return s>=0},backgroundImg:function(){return this.cheer.img?"background-image: url(".concat(this.cheer.img,")"):"background-image: url(https://moneycrashers-sparkchargemedia.netdna-ssl.com/wp-content/uploads/2017/08/bachelor-party-bar-drinks-1024x576.jpg)"}},components:{userCard:d,loadingModal:f["a"],chatRoom:_},sockets:{gotNewChatMsg:function(t){this.cheer.msgs?this.cheer.msgs.push(t):this.cheer.msgs=[t]},updateCheer:function(){this.loadCheer()}}},w=k,y=(s("993c"),Object(u["a"])(w,n,a,!1,null,"4e67bb72",null));y.options.__file="cheer-details.vue";e["default"]=y.exports},e853:function(t,e,s){var n=s("d3f4"),a=s("1169"),i=s("2b4c")("species");t.exports=function(t){var e;return a(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!a(e.prototype)||(e=void 0),n(e)&&(e=e[i],null===e&&(e=void 0))),void 0===e?Array:e}}}]);
//# sourceMappingURL=chunk-e005e97a.fa2ab771.js.map