(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9610c33e"],{"0a49":function(t,e,s){var n=s("9b43"),a=s("626a"),i=s("4bf8"),r=s("9def"),c=s("cd1c");t.exports=function(t,e){var s=1==t,o=2==t,l=3==t,d=4==t,u=6==t,h=5==t||u,f=e||c;return function(e,c,g){for(var p,m,v=i(e),C=a(v),_=n(c,g,3),k=r(C.length),b=0,w=s?f(e,k):o?f(e,0):void 0;k>b;b++)if((h||b in C)&&(p=C[b],m=_(p,b,v),t))if(s)w[b]=m;else if(m)switch(t){case 3:return!0;case 5:return p;case 6:return b;case 2:w.push(p)}else if(d)return!1;return u?-1:l||d?d:w}}},1169:function(t,e,s){var n=s("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"20d6":function(t,e,s){"use strict";var n=s("5ca1"),a=s("0a49")(6),i="findIndex",r=!0;i in[]&&Array(1)[i](function(){r=!1}),n(n.P+n.F*r,"Array",{findIndex:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")(i)},"2d2a":function(t,e,s){},"34d8":function(t,e,s){},"80fe":function(t,e,s){"use strict";var n=s("34d8"),a=s.n(n);a.a},"837f":function(t,e,s){"use strict";var n=s("2d2a"),a=s.n(n);a.a},cd1c:function(t,e,s){var n=s("e853");t.exports=function(t,e){return new(n(t))(e)}},d9c0:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"cheer-details-container"},[s("loading-modal"),s("section",{staticClass:"title-attendance-container"},[s("div",{staticClass:"name-date dark",style:t.backgroundImg},[s("div",{staticClass:"date"},[s("span",[t._v(t._s(t.date))])]),s("span",{staticClass:"location-name"},[t._v(t._s(t.cheer.locationName))]),s("br"),s("br"),t.cheer.attendees?s("span",{staticClass:"attens-num"},[t._v(t._s(t.cheer.attendees.length)+" mates comming!")]):t._e()]),s("div",{staticClass:"attending-share"},[s("div",{staticClass:"spot-attendance"},[t.userIsGoing?s("div",{staticClass:"is-going"},[s("h4",{staticClass:"txt"},[t._v("\n                        You are attending to this cheer!\n                        "),t.cheer.attendees?s("span",{staticClass:"spots-left"},[t._v("Spots left: "+t._s(t.spotsLeft))]):t._e()]),s("el-button",{staticClass:"btn",attrs:{size:"small",type:"warning",icon:"el-icon-close",plain:""},on:{click:function(e){t.userAttending(!1)}}},[t._v("Cancel")])],1):s("div",{staticClass:"is-going"},[s("h4",{staticClass:"txt"},[t._v("\n                        Are You Going?\n                        "),t.cheer.attendees?s("span",{staticClass:"spots-left"},[t._v(t._s(t.spotsLeft)+" Spots left")]):t._e()]),s("el-button",{staticClass:"btn",attrs:{size:"small",type:"warning",icon:"el-icon-check"},on:{click:function(e){t.userAttending(!0)}}}),s("el-button",{staticClass:"btn",attrs:{size:"small",type:"warning",icon:"el-icon-close",plain:""},on:{click:function(e){t.userAttending(!1)}}})],1),s("div",{staticClass:"share"},[s("social-sharing",{inlineTemplate:{render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("network",{attrs:{network:"facebook"}},[s("i",{staticClass:"fab fa-facebook-square"})]),s("network",{attrs:{network:"linkedin"}},[s("i",{staticClass:"fab fa-linkedin"})]),s("network",{attrs:{network:"twitter"}},[s("i",{staticClass:"fab fa-twitter-square"})]),s("network",{attrs:{network:"whatsapp"}},[s("i",{staticClass:"fab fa-whatsapp-square"})])],1)},staticRenderFns:[]}})],1)]),s("div",{staticClass:"categories"},[s("h1",[t._v("We are going to talk about ")]),t._l(t.cheer.category,function(e){return t.cheer.category?s("h2",{key:e},[t._v(t._s(e)),s("br")]):s("h1",[t._v("Everything")])})],2)])]),s("section",{staticClass:"main-info-container"},[s("div",{staticClass:"description-attendees"},[s("section",{staticClass:"cheer-attendees"},[t.cheer.attendees&&t.cheer.attendees.length?s("h3",[t._v(" Attendees:")]):s("h3",[t._v("Be the first one to join!")]),s("div",{staticClass:"attendees"},t._l(t.cheer.attendees,function(e){return s("div",{key:e._id},[s("user-card",{staticClass:"user-card",attrs:{user:e},nativeOn:{click:function(s){t.$router.push("/user/"+e._id)}}})],1)}))])]),s("chat-room",{attrs:{msgs:t.msgs}}),s("button",{staticClass:"chat-toggle",on:{click:t.toggleChat}})],1),s("section",{staticClass:"cheer-location flex column"},[s("div",{staticClass:"address"},[s("div",{staticClass:"icon"},[s("i",{staticClass:"fas fa-map-marker-alt"}),t._v(t._s(t.cheer.address))])]),s("div",{staticClass:"map"},[s("img",{attrs:{src:t.mapPic,alt:"map"}})])])],1)},a=[],i=(s("20d6"),s("cadf"),s("551c"),s("097d"),s("2670")),r=s("1a56"),c=(s("2d82"),s("2929")),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"chat"},[s("section",{ref:"chatList",staticClass:"chat-msg-list"},[s("h1",[t._v("Let's start talking")]),s("ul",{staticClass:"clean-list"},[t._l(t.msgs,function(e){return s("li",{key:e.at,staticClass:"msg"},[t._v(t._s(e.from)+": "+t._s(e.txt))])}),s("span",{ref:"endOfChat",attrs:{id:"end-of-chat"}})],2)]),s("form",{ref:"chat",on:{submit:function(e){return e.preventDefault(),t.sendMsg(e)}}},[s("input",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:"#end-of-chat",expression:"'#end-of-chat'"}],ref:"newMsgInput",attrs:{type:"text"}}),t._m(0)])])},l=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",[s("i",{staticClass:"chat-send fas fa-location-arrow"})])}],d={props:{msgs:{type:Array,default:function(){return[]}}},mounted:function(){window.refs=this.$refs},methods:{sendMsg:function(){var t=this.$refs.newMsgInput,e=t.value;if(e.trim()){var s=this.$route.params.cheerId,n=this.$store.getters.getUser,a=n?n.nickname:"Guest",i=n?n._id:"",r={userId:i,txt:e,at:Date.now(),from:a};this.$socket.emit("newChatMsg",{msg:r,cheerId:s}),t.value=""}},scrollToEnd:function(){var t=this.$refs.chatList;t.scrollTop=t.scrollHeight-t.clientHeight}},watch:{"msgs.length":function(t,e){var s=this;console.log({length:t,prevLength:e}),0===e&&this.$nextTick().then(function(){return s.scrollToEnd()})}}},u=d,h=(s("80fe"),s("2877")),f=Object(h["a"])(u,o,l,!1,null,"1651a1f0",null);f.options.__file="chat-room.vue";var g=f.exports,p=s("c1df"),m={data:function(){return{cheer:{position:{coordinates:{}}}}},created:function(){this.loadCheer(),this.$socket.emit("joinRoom",this.$route.params.cheerId),this.$store.dispatch({type:"setLoading",isLoading:!0})},methods:{loadCheer:function(){var t=this,e=this.$route.params.cheerId;i["a"].getById(e).then(function(e){return console.log("this cheer:",e),t.$store.dispatch({type:"setLoading",isLoading:!1}),t.cheer=e})},userAttending:function(t){var e,s=this,n=this.$route.params.cheerId,a=this.$store.getters.getUser;if(a)if(e=a._id,t)this.$socket.emit("userAttending",{userId:e,cheerId:n});else{var r=this.cheer.attendees.findIndex(function(t){return t._id===e});r>=0&&i["a"].removeAttendance(n).then(function(){return s.loadCheer()})}else this.$router.push("/login")},toggleChat:function(){this.$el.querySelector(".chat").classList.toggle("open")}},computed:{date:function(){return p(this.cheer.date).format("dddd, LL")},relativeDate:function(){return p(this.cheer.date).fromNow()},spotsLeft:function(){return this.cheer.spots-this.cheer.attendees.length},time:function(){return p(this.cheer.date).format("hh:mm A")},mapPic:function(){return"https://maps.googleapis.com/maps/api/staticmap?center=".concat(this.cheer.position.coordinates.lat,",").concat(this.cheer.position.coordinates.lng,"&markers=color:red%7Clabel:C%7C").concat(this.cheer.position.coordinates.lat,",").concat(this.cheer.position.coordinates.lng,"&zoom=16&size=600x400&key=AIzaSyDSpb5jrUSIDb124D7Qpjd4XJQ6d8oVPW0")},msgs:function(){var t=this.cheer.msgs;return t},userIsGoing:function(){var t,e=this.$store.getters.getUser;if(!e||!this.cheer.attendees)return!1;t=e._id;var s=this.cheer.attendees.findIndex(function(e){return e._id===t});return s>=0},backgroundImg:function(){return this.cheer.img?"background-image: url(".concat(this.cheer.img,")"):"background-image: url(https://moneycrashers-sparkchargemedia.netdna-ssl.com/wp-content/uploads/2017/08/bachelor-party-bar-drinks-1024x576.jpg)"}},components:{userCard:r["a"],loadingModal:c["a"],chatRoom:g},sockets:{gotNewChatMsg:function(t){this.cheer.msgs?this.cheer.msgs.push(t):this.cheer.msgs=[t]},updateCheer:function(){this.loadCheer()}}},v=m,C=(s("837f"),Object(h["a"])(v,n,a,!1,null,"f4ca2096",null));C.options.__file="cheer-details.vue";e["default"]=C.exports},e853:function(t,e,s){var n=s("d3f4"),a=s("1169"),i=s("2b4c")("species");t.exports=function(t){var e;return a(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!a(e.prototype)||(e=void 0),n(e)&&(e=e[i],null===e&&(e=void 0))),void 0===e?Array:e}}}]);
//# sourceMappingURL=chunk-9610c33e.e8e5036d.js.map