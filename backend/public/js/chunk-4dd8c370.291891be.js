(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4dd8c370"],{"20d6":function(t,e,s){"use strict";var a=s("5ca1"),n=s("0a49")(6),i="findIndex",r=!0;i in[]&&Array(1)[i](function(){r=!1}),a(a.P+a.F*r,"Array",{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")(i)},4717:function(t,e,s){"use strict";var a=s("842a"),n=s.n(a);n.a},"842a":function(t,e,s){},"98fb":function(t,e,s){},bd85:function(t,e,s){"use strict";var a=s("98fb"),n=s.n(a);n.a},d620:function(t,e,s){"use strict";var a=s("e5b4"),n=s.n(a);n.a},d9c0:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"cheer-details-container"},[s("loading-modal"),s("section",{staticClass:"title-attendance-container"},[s("div",{staticClass:"name-date dark",style:t.backgroundImg},[s("div",{staticClass:"date"},[s("span",[t._v(t._s(t.date))])]),s("span",{staticClass:"location-name"},[t._v(t._s(t.cheer.locationName))]),s("br"),s("br"),t.cheer.attendees?s("span",{staticClass:"attens-num"},[t._v(t._s(t.cheer.attendees.length)+" mates comming!")]):t._e()]),s("div",{staticClass:"attending-share"},[s("div",{staticClass:"spot-attendance"},[t.userIsGoing?s("div",{staticClass:"is-going"},[s("h4",{staticClass:"txt"},[t._v("\n            You are attending to this cheer!\n            "),t.cheer.attendees?s("span",{staticClass:"spots-left"},[t._v("Spots left: "+t._s(t.spotsLeft))]):t._e()]),s("el-button",{staticClass:"btn",attrs:{size:"small",type:"warning",icon:"el-icon-close",plain:""},on:{click:function(e){t.userAttending(!1)}}},[t._v("Cancel")])],1):s("div",{staticClass:"is-going"},[s("h4",{staticClass:"txt"},[t._v("\n            Are You Going?\n            "),t.cheer.attendees?s("span",{staticClass:"spots-left"},[t._v(t._s(t.spotsLeft)+" Spots left")]):t._e()]),s("el-button",{staticClass:"btn",attrs:{size:"small",type:"warning",icon:"el-icon-check"},on:{click:function(e){t.userAttending(!0)}}}),s("el-button",{staticClass:"btn",attrs:{size:"small",type:"warning",icon:"el-icon-close",plain:""},on:{click:function(e){t.userAttending(!1)}}})],1),s("div",{staticClass:"share"},[s("social-sharing",{inlineTemplate:{render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("network",{attrs:{network:"facebook"}},[s("i",{staticClass:"fab fa-facebook-square"})]),s("network",{attrs:{network:"linkedin"}},[s("i",{staticClass:"fab fa-linkedin"})]),s("network",{attrs:{network:"twitter"}},[s("i",{staticClass:"fab fa-twitter-square"})]),s("network",{attrs:{network:"whatsapp"}},[s("i",{staticClass:"fab fa-whatsapp-square"})])],1)},staticRenderFns:[]}})],1)]),s("div",{staticClass:"categories"},[s("h1",[t._v("We are going to talk about")]),t._l(t.cheer.category,function(e){return t.cheer.category?s("h2",{key:e},[t._v("\n          "+t._s(e)+"\n          "),s("br")]):s("h1",[t._v("Everything")])})],2)])]),s("section",{staticClass:"main-info-container"},[s("div",{staticClass:"description-attendees"},[s("section",{staticClass:"cheer-attendees"},[t.cheer.attendees&&t.cheer.attendees.length?s("h3",[t._v(" Attendees ("+t._s(t.cheer.attendees.length)+")")]):s("h3",[t._v("Be the first one to join!")]),s("div",{staticClass:"attendees"},t._l(t.cheer.attendees,function(e){return s("div",{key:e._id},[s("user-card",{staticClass:"user-card",attrs:{user:e},nativeOn:{click:function(s){t.$router.push("/user/"+e._id)}}})],1)}))])]),s("chat-room",{attrs:{msgs:t.msgs}}),s("button",{staticClass:"chat-toggle",on:{click:t.toggleChat}})],1),s("section",{staticClass:"cheer-location flex column"},[s("div",{staticClass:"address"},[s("div",{staticClass:"icon"},[s("i",{staticClass:"fas fa-map-marker-alt"}),t._v("\n        "+t._s(t.cheer.address)+"\n      ")])]),s("div",{staticClass:"map"},[s("img",{attrs:{src:t.mapPic,alt:"map"}})])])],1)},n=[],i=(s("20d6"),s("cadf"),s("551c"),s("097d"),s("2670")),r=s("1a56"),c=(s("2d82"),s("2929")),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"chat"},[s("section",{ref:"chatList",staticClass:"chat-msg-list"},[s("h1",[t._v("Let's start talking")]),s("div",{staticClass:"clean-list"},[t._l(t.msgs,function(e){return s("chat-msg",{key:e.at,staticClass:"msg",class:t.myMsg(e)},[s("span",{attrs:{slot:"from"},slot:"from"},[s("router-link",{attrs:{to:e.userId?"/user/"+e.userId:"/",tag:"span"}},[t._v(t._s(e.from))])],1),s("span",{attrs:{slot:"txt"},slot:"txt"},[t._v(t._s(e.txt))]),s("span",{attrs:{slot:"at"},slot:"at"},[t._v(t._s(t._f("relativeTime")(e.at)))])])}),s("span",{ref:"endOfChat",attrs:{id:"end-of-chat"}})],2)]),s("form",{ref:"chat",on:{submit:function(e){return e.preventDefault(),t.sendMsg(e)}}},[s("input",{ref:"newMsgInput",attrs:{type:"text"}}),t._m(0)])])},l=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",[s("i",{staticClass:"chat-send fas fa-location-arrow"})])}],h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"msg-container"},[s("div",{staticClass:"msg"},[s("span",{staticClass:"msg-from"},[t._t("from"),t._v(": ")],2),t._t("txt"),s("div",{staticClass:"msg-at"},[t._t("at")],2)],2)])},d=[],u={},f=u,g=(s("bd85"),s("2877")),m=Object(g["a"])(f,h,d,!1,null,"a5bc1048",null);m.options.__file="chat-msg.vue";var p=m.exports,v=s("c1df"),_={props:{msgs:{type:Array,default:function(){return[]}}},methods:{sendMsg:function(){var t=this.$refs.newMsgInput,e=t.value;if(e.trim()){var s=this.$route.params.cheerId,a=this.$store.getters.getUser,n=a?a.nickname:"Guest",i=a?a._id:"",r={userId:i,txt:e,at:Date.now(),from:n};this.$socket.emit("newChatMsg",{msg:r,cheerId:s}),t.value="",this.scrollToEnd()}},scrollToEnd:function(){var t=this.$refs.chatList;t.scrollTop=t.scrollHeight-t.clientHeight},myMsg:function(t){if(this.$store.getters.getUser&&t.from===this.$store.getters.getUser.nickname)return"my-msg"}},watch:{"msgs.length":function(t,e){var s=this;console.log({length:t,prevLength:e}),0===e&&this.$nextTick().then(function(){return s.scrollToEnd()})}},filters:{relativeTime:function(t){return v(t).fromNow()}},components:{chatMsg:p}},C=_,k=(s("4717"),Object(g["a"])(C,o,l,!1,null,"6df925e4",null));k.options.__file="chat-room.vue";var b=k.exports,w=s("c1df"),y={data:function(){return{cheer:{position:{coordinates:{}}}}},created:function(){this.loadCheer(),this.$socket.emit("joinRoom",this.$route.params.cheerId),this.$store.dispatch({type:"setLoading",isLoading:!0}),window.scrollTo(0,0)},methods:{loadCheer:function(){var t=this,e=this.$route.params.cheerId;i["a"].getById(e).then(function(e){return console.log("this cheer:",e),t.$store.dispatch({type:"setLoading",isLoading:!1}),t.cheer=e})},userAttending:function(t){var e,s=this.$route.params.cheerId,a=this.$store.getters.getUser;if(a)if(e=a._id,t)this.$socket.emit("userAttending",{userId:e,cheerId:s});else{var n=this.cheer.attendees.findIndex(function(t){return t._id===e});n>=0&&i["a"].removeAttendance(s).then(this.loadCheer)}else this.$router.push("/login")},toggleChat:function(){this.$el.querySelector(".chat").classList.toggle("open")}},computed:{date:function(){return w(this.cheer.date).format("dddd, LL")},relativeDate:function(){return w(this.cheer.date).fromNow()},spotsLeft:function(){return this.cheer.spots-this.cheer.attendees.length},time:function(){return w(this.cheer.date).format("hh:mm A")},mapPic:function(){return"https://maps.googleapis.com/maps/api/staticmap?center=".concat(this.cheer.position.coordinates.lat,",").concat(this.cheer.position.coordinates.lng,"&markers=color:red%7Clabel:C%7C").concat(this.cheer.position.coordinates.lat,",").concat(this.cheer.position.coordinates.lng,"&zoom=16&size=600x400&key=AIzaSyDSpb5jrUSIDb124D7Qpjd4XJQ6d8oVPW0")},msgs:function(){var t=this.cheer.msgs;return t},userIsGoing:function(){var t,e=this.$store.getters.getUser;if(!e||!this.cheer.attendees)return!1;t=e._id;var s=this.cheer.attendees.findIndex(function(e){return e._id===t});return s>=0},backgroundImg:function(){return this.cheer.img?"background-image: url(".concat(this.cheer.img,")"):"background-image: url(https://moneycrashers-sparkchargemedia.netdna-ssl.com/wp-content/uploads/2017/08/bachelor-party-bar-drinks-1024x576.jpg)"}},components:{userCard:r["a"],loadingModal:c["a"],chatRoom:b},sockets:{gotNewChatMsg:function(t){this.cheer.msgs?this.cheer.msgs.push(t):this.cheer.msgs=[t]},updateCheer:function(){this.loadCheer()}}},$=y,I=(s("d620"),Object(g["a"])($,a,n,!1,null,"4ffc9500",null));I.options.__file="cheer-details.vue";e["default"]=I.exports},e5b4:function(t,e,s){}}]);
//# sourceMappingURL=chunk-4dd8c370.291891be.js.map